<ui:composition template="admin.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:p="http://primefaces.org/ui"
                xmlns:of="http://omnifaces.org/functions">

    <ui:define name="title">
        <h3 class="text-red align-center" style="font-size: 80px;">
            <i class="fa fa-warning text-red">#{msg['label.error.header']}</i>
        </h3>
    </ui:define>

    <ui:define name="body">

        <div>
            <div class="error-content">
                <div class="box box-solid box-danger">
                    <div class="box-header with-border">
                        <h3>#{label.error.title}</h3>
                    </div>
                    <div class="box-body" style="overflow: auto">
                        <ul>
                            <li><b>Date/time:</b> #{of:formatDate(now, dateFormatMB.dateFormat)}</li>
                            <li><b>User agent:</b> #{header['user-agent']}</li>
                            <li>
                                <b>User IP:</b> #{empty header['x-forwarded-for'] ? request.remoteAddr : fn:split(header['x-forwarded-for'], ',')[0]}
                            </li>
                            <li><b>Request URI:</b> <a
                                    href="#{requestScope['javax.servlet.error.request_uri']}">#{requestScope['javax.servlet.error.request_uri']}</a>
                            </li>
                            <li><b>Ajax request:</b> #{facesContext.partialViewContext.ajaxRequest ? 'Yes' : 'No'}</li>
                            <li><b>Status code:</b> #{requestScope['javax.servlet.error.status_code']}</li>
                            <li><b>Exception type:</b> #{requestScope['javax.servlet.error.exception_type']}</li>
                            <li><b>Message:</b> #{requestScope['javax.servlet.error.message']}</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="box box-solid box-warning">
                <div class="box-header with-border">
                    <h3>#{msg['label.error.detail']}</h3>
                </div>
                <div class="box-body" style="overflow: auto">
                    <pre>
#{of:printStackTrace(requestScope['javax.servlet.error.exception'])}
#{of:printStackTrace(requestScope['javax.servlet.error.exception_stacktrace'])}
					</pre>
                </div>

            </div>
        </div>

    </ui:define>

</ui:composition>
